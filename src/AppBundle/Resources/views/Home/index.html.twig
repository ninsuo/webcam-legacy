{% extends 'AppBundle::layout.html.twig' %}

{% block title %}Cameras{% endblock %}


{% block body %}

    <div class="row">

        {% for camera in cameras %}

            <div class="col-md-6">
                <a href="{{ path('live', {name: camera}) }}">
                    <img
                            class="live img-responsive"
                            data-src="{{ path('last', {name: camera}) }}"
                            src="{{ path('last', {name: camera}) }}"
                    />
                    <div class="text-center">{{ camera }}</div>
                </a>
            </div>

        {% endfor %}

    </div>

{% endblock %}

{% block script %}

    <script type="text/javascript">

        setInterval(function () {

            $('.live').each(function () {
                var that = $(this);
                that.attr('src', (that.data('src') + '?tm=' + (Date.now() / 1000 | 0)));
            });

        }, 1000);

    </script>

{% endblock %}
